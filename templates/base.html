
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Football App</title>

<!-- BOOTSTRAP ICON -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
/* =========================
   ANDROID STYLE BASE
========================= */
body {
    margin: 0;
    background: #0e141b;
    color: #eaeaea;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto;
    overflow-x: hidden;
}

/* TOP BAR */
.topbar {
    height: 56px;
    background: #121a23;
    display: flex;
    align-items: center;
    padding: 0 16px;
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
}

.menu-btn {
    font-size: 1.6rem;
    cursor: pointer;
    margin-right: 16px;
}

.app-title {
    font-weight: 700;
}

.admin-badge {
    margin-left: auto;
    background: #ff4d4d;
    color: white;
    padding: 4px 8px;
    border-radius: 8px;
    font-size: 0.7rem;
    font-weight: bold;
    display: none;
}

/* SIDEBAR */
.sidebar {
    position: fixed;
    top: 0;
    left: -260px;
    width: 260px;
    height: 100%;
    background: #0b1017;
    padding-top: 56px;
    transition: 0.3s;
    z-index: 1100;
}

.sidebar.active {
    left: 0;
}

.sidebar a {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 20px;
    color: #ccc;
    text-decoration: none;
    transition: 0.2s;
}

.sidebar a:hover,
.sidebar a.active {
    background: #16202b;
    color: #00ffcc;
}

.sidebar i {
    font-size: 1.3rem;
}

.sidebar-divider {
    margin: 10px 20px;
    font-size:0.75rem;
    color:#777;
    text-transform: uppercase;
}

/* OVERLAY */
.overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    opacity: 0;
    pointer-events: none;
    transition: 0.3s;
    z-index: 1050;
}

.overlay.active {
    opacity: 1;
    pointer-events: auto;
}

/* CONTENT */
.content {
    padding: 76px 14px 20px;
}

/* ADMIN BADGE IN SIDEBAR */
.admin-icon {
    color: #ff4d4d !important;
}

</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
    <i class="bi bi-list menu-btn" onclick="toggleMenu()"></i>
    <span class="app-title">DayyScore</span>
    <span class="admin-badge" id="adminBadge">ADMIN</span>
</div>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
    <a href="/" class="nav-link"><i class="bi bi-calendar-event"></i> Upcoming</a>
    <a href="/live" class="nav-link"><i class="bi bi-broadcast"></i> Live</a>
    <a href="/finished" class="nav-link"><i class="bi bi-flag"></i> Finished</a>

    <div class="sidebar-divider">STANDINGS</div>
    <a href="/standings/PL" class="nav-link"><i class="bi bi-trophy"></i> Premier League</a>
    <a href="/standings/PD" class="nav-link"><i class="bi bi-trophy"></i> La Liga</a>
    <a href="/standings/SA" class="nav-link"><i class="bi bi-trophy"></i> Serie A</a>
    <a href="/standings/BL1" class="nav-link"><i class="bi bi-trophy"></i> Bundesliga</a>
    <a href="/standings/FL1" class="nav-link"><i class="bi bi-trophy"></i> Ligue 1</a>
    
    <!-- Admin Menu (Conditional) -->
    <div class="sidebar-divider" id="adminDivider" style="display: none;">ADMIN</div>
    <a href="/admin" class="nav-link admin-icon" id="adminLink" style="display: none;">
        <i class="bi bi-shield-lock"></i> Admin Panel
    </a>
    <a href="/settings" class="nav-link admin-icon" id="settingsLink" style="display: none;">
        <i class="bi bi-gear"></i> Settings
    </a>
</div>

<!-- OVERLAY -->
<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<!-- CONTENT -->
<div class="content">
    {% block content %}{% endblock %}
</div>

<!-- =========================
   INLINE JS
========================= -->
<script>
function toggleMenu() {
    document.getElementById("sidebar").classList.toggle("active");
    document.getElementById("overlay").classList.toggle("active");
}

// Check if user is admin
function checkAdmin() {
    // Check from URL parameter (for debugging)
    const urlParams = new URLSearchParams(window.location.search);
    const forceAdmin = urlParams.has('admin');
    
    // Check localStorage (for frontend toggles)
    const localAdmin = localStorage.getItem('isAdmin') === 'true';
    
    // Check if admin is logged in (from server-side)
    const isAdminLoggedIn = {{ 'true' if session.get('admin') else 'false' }};
    
    const isAdmin = forceAdmin || localAdmin || isAdminLoggedIn;
    
    if (isAdmin) {
        console.log("Admin mode activated");
        document.getElementById('adminBadge').style.display = 'block';
        document.getElementById('adminDivider').style.display = 'block';
        document.getElementById('adminLink').style.display = 'flex';
        document.getElementById('settingsLink').style.display = 'flex';
        
        // Store in localStorage for persistence
        localStorage.setItem('isAdmin', 'true');
    } else {
        localStorage.setItem('isAdmin', 'false');
    }
    
    return isAdmin;
}

// Highlight menu aktif
document.querySelectorAll(".sidebar a").forEach(link => {
    if (link.getAttribute("href") === window.location.pathname) {
        link.classList.add("active");
    }
});

// Initialize admin check
checkAdmin();

// Auto-close sidebar when clicking on mobile
if (window.innerWidth <= 768) {
    document.querySelectorAll('.sidebar a').forEach(link => {
        link.addEventListener('click', () => {
            document.getElementById('sidebar').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        });
    });
}
</script>

</body>
</html>